# 스크립트 추출 가이드 (프론트엔드 공유용)

> CallMate 백엔드의 스크립트 추출 기능을 설명합니다.

---

## 1. 개요

CallMate는 영업 스크립트를 입력받아 AI 분석 시 **맞춤형 추천 멘트**를 생성합니다.

### 지원하는 입력 방식

| 방식 | API | 설명 |
|-----|-----|------|
| **마크다운** | `POST /scripts/extract/markdown` | 프론트에서 텍스트 입력 |
| **PDF** | `POST /scripts/extract/pdf` | 파일 업로드 |

---

## 2. 추출하는 정보

| 섹션 | 설명 | 프롬프트 활용 |
|-----|------|-------------|
| **인사말 (greeting)** | 전화 시작 시 사용하는 인사 멘트 | 상담사 톤 학습 |
| **상품 소개 (product_info)** | 상품/서비스 핵심 특장점 | 추천 시 특장점 언급 |
| **FAQ (faq)** | 자주 묻는 질문과 모범 답변 | 고객 질문 대응 |
| **반대 처리 (objection_handling)** | 거절/반대 시 응대 방법 | 망설이는 고객 설득 |
| **클로징 (closing)** | 마무리 멘트 | 자연스러운 종료 유도 |
| **핵심 멘트 (key_phrases)** | 따옴표로 강조된 핵심 문구 | 실제 사용 권장 멘트 |

---

## 3. 마크다운 작성 규칙

### 필수 형식

```markdown
# 회사명 (H1 헤더)

## 섹션명 (H2 헤더)
- 리스트 아이템 (대시로 시작)
- "따옴표로 감싸면 핵심 멘트"

## 자주 묻는 질문
### Q: 질문 내용 (H3 + Q:)
A: 답변 내용 (A:로 시작)
```

### 인식되는 섹션 헤더

| 카테고리 | 인식되는 헤더명 |
|---------|---------------|
| 인사말 | `인사말`, `인사`, `오프닝`, `opening` |
| 상품 소개 | `상품 소개`, `상품소개`, `제품 소개`, `서비스 소개`, `특장점` |
| FAQ | `자주 묻는 질문`, `FAQ`, `Q&A`, `질문과 답변` |
| 반대 처리 | `반대 처리`, `이의 제기`, `거절 응대`, `objection` |
| 클로징 | `클로징`, `마무리`, `closing`, `엔딩` |

---

## 4. API 응답 예시

```json
{
  "success": true,
  "input_type": "markdown",
  "extracted": {
    "company_name": "ABC보험",
    "greeting": ["안녕하세요, ABC보험입니다."],
    "product_info": ["업계 최저 보험료", "24시간 모바일 청구"],
    "faq": [
      {"question": "해지 위약금이 있나요?", "answer": "1년 이후 해지 시 위약금이 없습니다."}
    ],
    "closing": ["좋은 하루 되세요"],
    "key_phrases": ["안녕하세요, ABC보험입니다."]
  },
  "prompt_context": "## ABC보험 영업 스크립트 가이드\n..."
}
```

---

## 5. 프론트엔드 구현 가이드

### UI 플로우

```
[스크립트 입력 방식 선택]
    ├─ 📝 직접 입력 → 마크다운 에디터
    └─ 📄 PDF 업로드 → 파일 업로드
              │
              ▼
    [추출 결과 미리보기]
    ✅ 인사말 2개 추출
    ✅ 상품 특장점 5개 추출
              │
              ▼
    [prompt_context 저장 → 분석 API에 전달]
```

### 에러 처리

| 에러 코드 | 원인 | 프론트 대응 |
|----------|-----|-----------|
| 400 | 마크다운 파싱 실패 | "형식을 확인해주세요" |
| 400 | PDF 아닌 파일 | "PDF 파일만 가능합니다" |
| 400 | 10MB 초과 | "파일 크기 제한 초과" |
